-- gc begin
-- gc end
-- gc begin
-- gc end
heap_002 allocate 40 for 3
-- gc begin
-- gc end
-- gc begin
heap_002 mark clock
heap_002 blacken clock
-- gc end
heap_004 allocate 24 for 2
-- gc begin
heap_004 mark <native fn>
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_004 blacken <native fn>
-- gc end
heap_007 allocate 40 for 3
-- gc begin
heap_007 mark gc
heap_004 mark <native fn>
heap_004 blacken <native fn>
heap_007 blacken gc
-- gc end
heap_008 allocate 24 for 2
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_010 allocate 72 for 1
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_012 allocate 40 for 3
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_017 allocate 40 for 3
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_019 allocate 40 for 3
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_020 allocate 72 for 1
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_022 allocate 40 for 3
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_026 allocate 72 for 1
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_026 mark <script>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_026 blacken <script>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_028 allocate 40 for 3
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_026 mark <script>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_026 blacken <script>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_026 mark <fn set>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_026 blacken <fn set>
heap_028 mark set
heap_028 blacken set
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_026 mark <fn set>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_026 blacken <fn set>
heap_028 mark set
heap_028 blacken set
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_031 allocate 40 for 3
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_026 mark <fn set>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_026 blacken <fn set>
heap_028 mark set
heap_028 blacken set
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_026 mark <fn set>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_026 mark <fn set>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_022 blacken initial
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end

Disassembling set ...
0000    7 OP_CONSTANT         0 'updated'
0002    | OP_SET_UPVALUE      0
0004    | OP_POP
0005    | OP_NIL
0006    | OP_RETURN
Disassembling set ... done.

-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_035 allocate 72 for 1
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_035 mark <script>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_035 blacken <script>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
heap_037 allocate 40 for 3
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_035 mark <fn get>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_035 blacken <fn get>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_035 mark <fn get>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end

Disassembling get ...
0000    8 OP_GET_UPVALUE      0
0002    | OP_PRINT
0003    | OP_NIL
0004    | OP_RETURN
Disassembling get ... done.

-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_035 mark <fn get>
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_035 mark <fn get>
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_035 mark <fn get>
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_020 mark <fn main>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_035 mark <fn get>
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end

Disassembling main ...
0000    5 OP_CONSTANT         0 'initial'
0002    7 OP_CLOSURE          1 <fn set>
0004      | local 1
0006    8 OP_CLOSURE          2 <fn get>
0008      | local 1
0010   10 OP_GET_LOCAL        2
0012    | OP_SET_GLOBAL       3 'globalSet'
0014    | OP_POP
0015   11 OP_GET_LOCAL        3
0017    | OP_SET_GLOBAL       4 'globalGet'
0019    | OP_POP
0020   12 OP_NIL
0021    | OP_RETURN
Disassembling main ... done.

-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_020 mark <fn main>
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_035 mark <fn get>
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_020 mark <fn main>
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_035 mark <fn get>
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_020 mark <fn main>
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_035 mark <fn get>
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end
-- gc begin
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_010 mark <script>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_020 mark <fn main>
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_035 mark <fn get>
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
-- gc end

Disassembling <script> ...
0000    1 OP_NIL
0001    | OP_DEFINE_GLOBAL    0 'globalSet'
0003    2 OP_NIL
0004    | OP_DEFINE_GLOBAL    1 'globalGet'
0006   12 OP_CLOSURE          3 <fn main>
0008    | OP_DEFINE_GLOBAL    2 'main'
0010   14 OP_GET_GLOBAL       4 'main'
0012    | OP_CALL             0
0014    | OP_POP
0015   15 OP_GET_GLOBAL       5 'globalSet'
0017    | OP_CALL             0
0019    | OP_POP
0020   16 OP_GET_GLOBAL       6 'globalGet'
0022    | OP_CALL             0
0024    | OP_POP
0025   17 OP_NIL
0026    | OP_RETURN
Disassembling <script> ... done.

-- gc begin
heap_010 mark <script>
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
heap_010 blacken <script>
heap_012 mark globalSet
heap_017 mark globalGet
heap_019 mark main
heap_020 mark <fn main>
heap_020 blacken <fn main>
heap_022 mark initial
heap_026 mark <fn set>
heap_035 mark <fn get>
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
heap_022 blacken initial
heap_019 blacken main
heap_017 blacken globalGet
heap_012 blacken globalSet
-- gc end
heap_046 allocate 40 for 0

Executing ...
stack: <script>
0000    1 OP_NIL
stack: <script> nil
0001    | OP_DEFINE_GLOBAL    0 'globalSet'
stack: <script>
0003    2 OP_NIL
stack: <script> nil
0004    | OP_DEFINE_GLOBAL    1 'globalGet'
stack: <script>
0006   12 OP_CLOSURE          3 <fn main>
-- gc begin
heap_012 mark globalSet
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_017 mark globalGet
heap_017 blacken globalGet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
heap_012 blacken globalSet
-- gc end
heap_047 allocate 40 for 0
stack: <script> <fn main>
0008    | OP_DEFINE_GLOBAL    2 'main'
stack: <script>
0010   14 OP_GET_GLOBAL       4 'main'
stack: <script> <fn main>
0012    | OP_CALL             0
stack: <script> <fn main>
0000    5 OP_CONSTANT         0 'initial'
stack: <script> <fn main> initial
0002    7 OP_CLOSURE          1 <fn set>
0004      | local 1
-- gc begin
heap_046 mark <script>
heap_022 mark initial
heap_012 mark globalSet
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_019 mark main
heap_017 mark globalGet
heap_017 blacken globalGet
heap_019 blacken main
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
heap_012 blacken globalSet
heap_022 blacken initial
heap_046 blacken <script>
heap_010 mark <script>
heap_010 blacken <script>
heap_020 mark <fn main>
heap_020 blacken <fn main>
heap_026 mark <fn set>
heap_035 mark <fn get>
heap_035 blacken <fn get>
heap_037 mark get
heap_037 blacken get
heap_026 blacken <fn set>
heap_028 mark set
heap_031 mark updated
heap_031 blacken updated
heap_028 blacken set
-- gc end
-- gc begin
heap_046 mark <script>
heap_047 mark <fn main>
heap_012 mark globalSet
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_017 mark globalGet
heap_017 blacken globalGet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
heap_012 blacken globalSet
heap_047 blacken <fn main>
heap_046 blacken <script>
-- gc end
heap_049 allocate 40 for 0
-- gc begin
heap_046 mark <script>
heap_047 mark <fn main>
heap_012 mark globalSet
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_017 mark globalGet
heap_017 blacken globalGet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
heap_012 blacken globalSet
heap_047 blacken <fn main>
heap_046 blacken <script>
-- gc end
heap_050 allocate 48 for 4
stack: <script> <fn main> initial <fn set>
0006    8 OP_CLOSURE          2 <fn get>
0008      | local 1
-- gc begin
heap_046 mark <script>
heap_047 mark <fn main>
heap_049 mark <fn set>
heap_012 mark globalSet
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_017 mark globalGet
heap_017 blacken globalGet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
heap_012 blacken globalSet
heap_049 blacken <fn set>
heap_047 blacken <fn main>
heap_046 blacken <script>
-- gc end
-- gc begin
heap_046 mark <script>
heap_047 mark <fn main>
heap_049 mark <fn set>
heap_050 mark <upvalue>
heap_012 mark globalSet
heap_004 mark <native fn>
heap_007 mark gc
heap_008 mark <native fn>
heap_017 mark globalGet
heap_017 blacken globalGet
heap_008 blacken <native fn>
heap_007 blacken gc
heap_004 blacken <native fn>
heap_012 blacken globalSet
heap_050 blacken <upvalue>
heap_049 blacken <fn set>
heap_047 blacken <fn main>
heap_046 blacken <script>
-- gc end
heap_052 allocate 40 for 0
stack: <script> <fn main> initial <fn set> <fn get>
0010   10 OP_GET_LOCAL        2
stack: <script> <fn main> initial <fn set> <fn get> <fn set>
0012    | OP_SET_GLOBAL       3 'globalSet'
stack: <script> <fn main> initial <fn set> <fn get> <fn set>
0014    | OP_POP
stack: <script> <fn main> initial <fn set> <fn get>
0015   11 OP_GET_LOCAL        3
stack: <script> <fn main> initial <fn set> <fn get> <fn get>
0017    | OP_SET_GLOBAL       4 'globalGet'
stack: <script> <fn main> initial <fn set> <fn get> <fn get>
0019    | OP_POP
stack: <script> <fn main> initial <fn set> <fn get>
0020   12 OP_NIL
stack: <script> <fn main> initial <fn set> <fn get> nil
0021    | OP_RETURN
stack: <script> nil
0014    | OP_POP
stack: <script>
0015   15 OP_GET_GLOBAL       5 'globalSet'
stack: <script> <fn set>
0017    | OP_CALL             0
stack: <script> <fn set>
0000    7 OP_CONSTANT         0 'updated'
stack: <script> <fn set> updated
0002    | OP_SET_UPVALUE      0
stack: <script> <fn set>
0004    | OP_POP
stack: <script>
0005    | OP_NIL
stack: <script> nil
0006    | OP_RETURN
stack: <script> nil
0019    | OP_POP
stack: <script>
0020   16 OP_GET_GLOBAL       6 'globalGet'
stack: <script> <fn get>
0022    | OP_CALL             0
stack: <script> <fn get>
0000    8 OP_GET_UPVALUE      0
stack: <script> <fn get> updated
0002    | OP_PRINT
updated
stack: <script> <fn get>
0003    | OP_NIL
stack: <script> <fn get> nil
0004    | OP_RETURN
stack: <script> nil
0024    | OP_POP
stack: <script>
0025   17 OP_NIL
stack: <script> nil
0026    | OP_RETURN
Executing ... done.

heap_052 free type 0
heap_050 free type 4
heap_049 free type 0
heap_047 free type 0
heap_046 free type 0
heap_017 free type 3
heap_012 free type 3
heap_008 free type 2
heap_007 free type 3
heap_004 free type 2
heap_002 free type 3
heap_037 free type 3
heap_035 free type 1
heap_031 free type 3
heap_028 free type 3
heap_026 free type 1
heap_022 free type 3
heap_020 free type 1
heap_019 free type 3
heap_010 free type 1
